# プレゼン用Q&A（学内作品展向け）

## 用語注釈（簡易）
- QR: 二次元コード。紙や画面に表示してカメラで読み取るもの。
- QRスキャン: カメラでQRを読み取る操作。
- 位置情報: 端末が取得する現在地の情報（OIC校内判定に使用）。
- ジオフェンス: OIC校内(半径50m)の範囲内かを判定する仕組み。
- 精度: 位置情報の誤差の大きさ（誤差が大きいと判定不可）。
- CSV: 表データをカンマ区切りで保存するテキスト形式。
- Push通知: ブラウザが表示するプッシュ通知。
- LINE通知: LINEの公式API経由で送る通知。
- Hotwire: RailsでリアルタイムUIを実現する仕組み（Turbo+Stimulus）。
- Turbo: 画面遷移や部分更新を高速化する仕組み。
- Stimulus: 画面遷移を減らすために、インライン更新や引き出し表示の動きを制御する軽量なJavaScriptフレームワーク。
- MessageVerifier: Railsの署名機構。改ざん検知に使う。
- RQRCode: RubyでQR画像を生成するライブラリ。
- data URL: 画像データを文字列で埋め込む形式。
- UserAgent: ブラウザや端末の種類を示す文字列。
- VAPID: Web Push用の公開鍵/秘密鍵の仕組み。
- Service Worker: ブラウザで通知を受け取るための常駐スクリプト。
- BOM: CSVの文字コードを示す先頭の目印。
- API: 外部システムとデータ連携する窓口。
- MVC: Model/View/Controllerに分ける設計。
- Service Object: ビジネスロジックをクラスに分離する設計。
- Rails.cache: キャッシュに一時保存する仕組み。

## 学生向け（33問）
※専門用語は「用語注釈（簡易）」を参照
1. Q: RoR出席管理システムって何？
   A: QRで出席・退室・履歴・申請を簡単にする学内向けの出席管理システムです。 たとえば、入館ゲートでスタンプを押すイメージです。
2. Q: どこからログインする？
   A: `/login` でメールアドレスとパスワードを入力します。 たとえば、学校の玄関で名簿チェックを受ける感じです。
3. Q: 学生アカウントはどうやってもらう？
   A: 学校または管理者が発行します。 たとえば、会員証を学校が配るイメージです。
4. Q: パスワードを忘れたら？
   A: 管理者に再設定を依頼してください。 たとえば、鍵をなくして合鍵を作る感じです。
5. Q: 出席はどう取る？
   A: 教員が表示したQRをスキャンし、OIC校内(半径50m)で位置情報が取得できたら登録されます。 たとえば、改札にタッチして記録が残る感じです。
6. Q: いつのQRでもいい？
   A: 当日かつ有効期限内のQRだけが有効です。 たとえば、期限付きのチケットと同じです。
7. Q: 出席扱いになる条件は？
   A: 教員が発行したQRをスキャンした記録が「出席」になります。 たとえば、改札にタッチした記録が残る感じです。
8. Q: 授業開始から20分過ぎたら？
   A: 出席登録できず欠席扱いになります。 たとえば、試験の入場締切を過ぎた状態です。
9. Q: 遅刻はどうなる？
   A: 遅刻申請が承認された場合に遅刻として反映されます。 たとえば、遅延証明が認められると反映される感じです。
10. Q: 退室はどう記録される？
    A: 同じ授業のQRを2回目にスキャンすると退室が記録されます。 たとえば、入館と退館のスタンプが2つ付くイメージです。
11. Q: 早退判定は？
    A: 滞在時間が授業の80%未満だと早退になります。 たとえば、映画の途中で退出すると早退扱いになる感じです。
12. Q: 出席履歴はどこで見る？
    A: `/history` で確認できます。 たとえば、通帳の履歴を見る感じです。
13. Q: 出席履歴を出力できる？
    A: CSVでダウンロードできます。 たとえば、成績表を表形式で持ち帰る感じです。
14. Q: 欠席/遅刻/公欠の申請はどこ？
    A: `/attendance_requests` から送信します。 たとえば、欠席届を提出するイメージです。
15. Q: 申請はいつ反映される？
    A: 教員が承認した時点で出席に反映されます。 たとえば、先生の印鑑が押されたら有効になる感じです。
16. Q: 申請の進捗はどこで見る？
    A: 申請履歴のステータスで確認できます。 たとえば、宅配の配送状況を確認する感じです。
17. Q: 通知はどこで見る？
    A: `/notifications` に一覧で表示されます。 たとえば、スマホの通知一覧を見る感じです。
18. Q: メール/LINE/Push通知は使える？
    A: 連携設定が有効なら通知を受け取れます。 たとえば、連絡手段を切り替えるスイッチです。
19. Q: カメラが使えないときは？
    A: 手入力フォームにQR文字列を貼り付けて送信します。位置情報の許可は必要です（OIC校内判定のため）。 たとえば、レシートの番号を手で入力する感じです。
20. Q: 対応ブラウザは？
    A: Chrome/EdgeなどのChromium系推奨、iOS Safari 16+はフォールバック対応です。位置情報が使えるブラウザが前提です（OIC校内判定のため）。 たとえば、使える機種の一覧を見る感じです。
21. Q: QRが古いと言われたら？
    A: 教員に再表示を依頼してください。 たとえば、期限切れのチケットと同じです。
22. Q: 履修していないクラスを読んだら？
    A: 未履修エラーになり出席登録できません。 たとえば、参加登録していないイベントに入れない感じです。
23. Q: 休講日にスキャンしたら？
    A: 休講エラーが表示されます。 たとえば、お店の定休日に行くと閉まっている感じです。
24. Q: 出席確定済みの授業は？
    A: 登録できずエラー表示になります。 たとえば、レジ締め後は修正できない感じです。
25. Q: スキャンを連打したら？
    A: レート制限で一時的にブロックされます。 たとえば、ボタンを連打すると一時停止される感じです。
26. Q: 位置情報必須って何？
    A: OIC校内(半径50m)で位置情報が取得できないと出席登録できない設定です。 たとえば、教室内でだけ記録する感じです。
27. Q: ジオフェンスって何？
    A: OIC校内(半径50m)だけ許可する範囲設定です。 たとえば、校舎の中だけ通す門のイメージです。
28. Q: 通知設定はどこ？
    A: プロフィールの通知設定で変更できます。 たとえば、通知のON/OFFを切り替える感じです。
29. Q: LINE IDはどこで設定？
    A: プロフィールのLINE欄に登録します。 たとえば、連絡先を登録する感じです。
30. Q: Push通知はどう許可する？
    A: ブラウザの許可とプロフィールのON設定が必要です。 たとえば、通知を許可するポップアップと同じです。
31. Q: 「要注意」とは？
    A: 欠席合計が3回以上、または出席率70%未満の状態です。 たとえば、成績の黄信号が付くイメージです。
32. Q: 出席率の計算は？
    A: (出席+遅刻+公欠) / 予定回数 × 100 です。 たとえば、平均点を計算する感じです。
33. Q: 個人情報の扱いは？
    A: `/data-policy` に保存期間と利用目的を明記しています。位置情報は出席確認のために保存されます。 たとえば、個人情報の取扱説明書を見る感じです。

## 教員向け（33問）
※専門用語は「用語注釈（簡易）」を参照
1. Q: 教員ができることは？
   A: クラス管理、QR発行、出席管理、申請承認、レポート、監査ログ確認です。 たとえば、先生用の操作盤を使うイメージです。
2. Q: クラスはどこで作成する？
   A: `/school_classes` の「新規クラス」から作成します。 たとえば、時間割を作る感じです。
3. Q: 時限と曜日の設定は？
   A: クラス作成画面で時限と曜日を設定します。 たとえば、授業の時間割を決める感じです。
4. Q: 休講/補講の設定は？
   A: クラス詳細の「特別日程」で設定します。 たとえば、カレンダーの予定を変更する感じです。
5. Q: 名簿取り込みは？
   A: クラス詳細のCSVインポートから行います。 たとえば、名簿をまとめて登録する感じです。
6. Q: 新規学生の作成は？
   A: 管理者のみ可能で、教員は既存学生の更新のみです。 たとえば、入学手続きは事務だけができる感じです。
7. Q: QR発行はどこ？
   A: `/generate-qr` から発行します。 たとえば、入場券を配る感じです。
8. Q: QRは自動更新される？
   A: 約60秒ごとに自動更新され、古いQRは無効になります。 たとえば、整理券が定期的に更新される感じです。
9. Q: QRの有効期限は？
   A: 5分です。 たとえば、駐車券の有効期限みたいなものです。
10. Q: スキャン結果はどこで確認？
    A: 出席管理画面にリアルタイムで反映されます。 たとえば、電光掲示板にすぐ反映される感じです。
11. Q: 退室の記録は？
    A: 学生がQRを2回目にスキャンすると退室になります。 たとえば、入館と退館の記録が付く感じです。
12. Q: 出席を手動で修正するには？
    A: 出席管理の編集で変更し、理由を入力して保存します。 たとえば、手書きで名簿を修正する感じです。
13. Q: 教員の修正は即時反映？
    A: 管理者承認が必要なため、操作申請になります。 たとえば、重要な変更は上司承認が必要な感じです。
14. Q: 出席申請の承認は？
    A: `/attendance_requests` で承認/却下できます。 たとえば、申請書にハンコを押す感じです。
15. Q: 一括承認はできる？
    A: 申請一覧の一括処理で可能です。 たとえば、まとめてハンコを押す感じです。
16. Q: 出席確定はどうする？
    A: 出席管理から確定を実行し、教員は承認申請になります。 たとえば、締め作業で確定させる感じです。
17. Q: 確定解除はどうする？
    A: 管理者のみ解除でき、教員は申請します。 たとえば、締め直しの申請を出す感じです。
18. Q: 自動欠席確定は？
    A: 授業締切後に未登録者を欠席として確定します。 たとえば、締切後に未提出を自動で欠席にする感じです。
19. Q: 出席ポリシーで変えられる項目は？
    A: レート制限、最低出席率、警告閾値、IP制限などです。位置情報とジオフェンスはOIC校内固定です。 たとえば、クラスごとのルールブックです。
20. Q: 遅刻/締切の扱いは？
    A: QRスキャンは出席扱い、20分後は登録不可。遅刻は申請/手動で反映します。 たとえば、入場締切のルールと同じです。
21. Q: 開始前のスキャンは？
    A: 許可設定で開始前チェックインを制御できます。 たとえば、開場前に入るかどうかの設定です。
22. Q: IP制限は？
    A: 許可IPの範囲を設定できます。位置情報の範囲はOIC校内固定です。 たとえば、教室のWi-Fiだけ許可する感じです。
23. Q: 位置情報運用は？
    A: OIC校内(半径50m)のみ有効で固定運用です。 たとえば、校舎内だけ通す門のイメージです。
24. Q: 不正検知アラートは？
    A: 失敗多発、同一IP集中、QR共有疑いで通知されます。 たとえば、警備が不審な動きを見つける感じです。
25. Q: スキャンログはどこ？
    A: `/scan-logs` で確認できます。 たとえば、入館記録を一覧で見る感じです。
26. Q: 出席変更ログはどこ？
    A: `/attendance-logs` で確認できます。 たとえば、修正履歴の台帳を見る感じです。
27. Q: CSVエクスポートは？
    A: 出席管理画面で期間を指定して出力します。 たとえば、成績表を表で持ち帰る感じです。
28. Q: CSVインポートは？
    A: 教員は申請、管理者が承認して反映します。 たとえば、表計算をまとめて反映する感じです。
29. Q: レポートはどこ？
    A: `/reports` で期間を指定して確認します。 たとえば、学期の成績分析を見る感じです。
30. Q: 期末レポートは？
    A: PDF/CSVで出力できます。 たとえば、学期末の成績表を出す感じです。
31. Q: 通知設定は？
    A: プロフィールでメール/LINE/PushのON/OFFを設定します。 たとえば、連絡網の配信設定です。
32. Q: 学生がQRを読めない場合は？
    A: 手入力で対応するか、申請で補正します。 たとえば、手書きで出欠をつける感じです。
33. Q: クラスの削除は？
    A: 管理者のみ削除できます。 たとえば、クラスを閉講する操作です。

## 観覧エンジニア向け（33問）
※専門用語は「用語注釈（簡易）」を参照
1. Q: 技術スタックは？
   A: Ruby on Rails 8、Hotwire、Tailwind CSS、PostgreSQLです。 たとえば、料理の材料を並べる感じです。
2. Q: アーキテクチャは？
   A: MVC + Service Object で責務分離しています。 たとえば、建物の設計図を描く感じです。
3. Q: 認証方式は？
   A: パスワードハッシュによる認証とセッション認証です。 たとえば、入館証を確認する係のようなものです。
4. Q: 認可方式は？
   A: ロールと権限テーブルでアクセス制御します。 たとえば、職員だけ入れる部屋の鍵を管理する感じです。
5. Q: QRトークンはどう生成？
   A: 署名付きトークンを発行する仕組みで生成します。 たとえば、偽造防止シール付きのチケットを作る感じです。
6. Q: トークンのペイロードは？
   A: クラスID/教員ID/授業回ID/日付/期限の情報です。 たとえば、荷物のラベルに必要情報を書く感じです。
7. Q: トークンの有効期限は？
   A: 5分です。 たとえば、タイムリミット付きのチケットです。
8. Q: 再発行時の扱いは？
   A: 既存の発行セッションを失効し最新のみ有効にします。 たとえば、古いチケットを無効にして新しいのを出す感じです。
9. Q: QR画像の生成は？
   A: QR生成ライブラリでPNGを作り、画像データURLで表示します。 たとえば、QRを印刷して配る感じです。
10. Q: QRの自動更新は？
    A: フロント側のスクリプトがJSONを取得して約60秒ごとに更新します。 たとえば、電光掲示板の内容を自動更新する感じです。
11. Q: スキャンログの設計は？
    A: スキャンログに結果・IP・ブラウザ情報・時刻・位置情報判定の結果を保存します。 たとえば、入退室台帳に理由付きで記録する感じです。
12. Q: トークンのハッシュ値とは？
    A: トークン文字列をSHA256でハッシュ化した値です。 たとえば、指紋のように一意な値を残す感じです。
13. Q: レート制限は？
    A: キャッシュ機構で分単位のカウントを保持し制御します。 たとえば、入場制限で混雑を抑える感じです。
14. Q: 不正検知は？
    A: 不正検知ロジックで失敗多発/IP集中/トークン共有を検知します。 たとえば、警備システムが異常を検知する感じです。
15. Q: 出席ポリシーの中心は？
    A: 出席ポリシー設定にしきい値と判定ロジックを集約しています。位置情報はOIC校内固定です。 たとえば、校則のルールを一か所にまとめる感じです。
16. Q: 早退判定は？
    A: 最低出席率に基づく滞在分数不足で判定します。 たとえば、滞在時間の不足で早退になる感じです。
17. Q: 出席レコードの一意性は？
    A: 学生×クラス×日付で一意制約です。 たとえば、同じ番号のチケットを2枚作らない感じです。
18. Q: 監査ログは？
    A: 出席変更ログに理由必須で記録します。 たとえば、日報に理由付きで記録する感じです。
19. Q: 出席申請のフローは？
    A: 審査中→承認/却下で、承認時に出席へ反映します。 たとえば、稟議書が承認されてから反映される感じです。
20. Q: 操作申請の対象は？
    A: 出席修正/確定/解除/CSV反映を管理者承認で実行します。 たとえば、重要操作に上長の印鑑が必要な感じです。
21. Q: 自動欠席確定は？
    A: 自動欠席確定処理が締切後に欠席を作成し授業回をロックします。 たとえば、締切後に自動で未提出扱いにする感じです。
22. Q: 授業回の生成は？
    A: 授業回生成ロジックがスケジュールと特別日程から生成します。 たとえば、カレンダーから授業予定を自動生成する感じです。
23. Q: CSVインポートは？
    A: 文字コードの先頭マーク(BOM)を除去し、ステータスを正規化して一括反映します。 たとえば、表計算のデータを取り込む感じです。
24. Q: 名簿CSVの権限は？
    A: 管理者は新規作成、教員は既存更新のみです。 たとえば、入学手続きは事務だけができる感じです。
25. Q: レポート集計は？
    A: レポート集計ロジックで集計し、期末レポートも同じデータから生成します。 たとえば、売上を週次で集計する感じです。
26. Q: PDF生成は？
    A: PDF生成ライブラリで期末レポートを生成します。 たとえば、成績表をPDFで印刷する感じです。
27. Q: 通知は？
    A: 通知記録を作成し、設定があればメール/LINE/Pushへ配信します。 たとえば、連絡網に通知を流す感じです。
28. Q: Push通知は？
    A: Web Pushの鍵で配信し、ブラウザの常駐スクリプトで受信します。 たとえば、スマホにピコンと出る通知です。
29. Q: 外部連携は？
    A: 現状は学内運用に集中し、外部API連携は提供していません。必要になれば段階的に追加します。
30. Q: DB構成は？
    A: ユーザー/クラス/出席/QR関連のテーブルを中心に外部キーで連携します。位置情報は出席レコードの位置情報JSONに保存します。 たとえば、倉庫の棚を整理して管理する感じです。
31. Q: テストは？
    A: Rails標準テストとブラウザE2Eを用意しています。 たとえば、チェックリストで動作確認する感じです。
32. Q: デプロイは？
    A: Render想定でビルドスクリプトとアセット事前生成を実行します。 たとえば、本番公開のスイッチを入れる感じです。
33. Q: 保守性の工夫は？
    A: しきい値と判定を出席ポリシー設定に集約し、共通化でバグを抑えています。 たとえば、ルールを一か所にまとめて迷子を防ぐ感じです。
