# 単体テスト一覧

## 概要
- テストファイル数: 21
- テストケース数: 29

## Controllers
- test\controllers\api\v1\classes_controller_test.rb
  - requires api key
  - rejects missing scope
  - returns classes with valid scope

## Models
- test\models\attendance_change_test.rb
  - requires date, new_status, changed_at, and reason
- test\models\attendance_policy_test.rb
  - present before late threshold
  - late after late threshold
  - outside window after close
  - early scan blocked when not allowed
  - close_after_minutes must be after late_after_minutes
  - invalid ip range is rejected
  - early_leave? uses minimum attendance rate
- test\models\attendance_record_test.rb
- test\models\attendance_request_test.rb
  - requires reason and submitted_at
  - accepts pending status by default
- test\models\class_session_override_test.rb
  - requires start_time and end_time together
- test\models\class_session_test.rb
  - duration_minutes returns session length
  - date is unique per class
- test\models\enrollment_test.rb
- test\models\qr_scan_event_test.rb
  - requires status and token_digest
- test\models\qr_session_test.rb
  - expires_at must be after issued_at
- test\models\school_class_test.rb
- test\models\user_test.rb

## Services
- test\services\attendance_csv_importer_test.rb
  - imports attendance records and skips missing status rows
  - accepts english status values
  - imports check in and out times with early leave
- test\services\attendance_finalizer_test.rb
  - finalize creates absent records and locks session
- test\services\attendance_token_test.rb
  - generate and verify token with session
  - expired token returns error status
  - invalid token returns error status
- test\services\operation_request_processor_test.rb
  - approves attendance correction and creates logs
- test\services\qr_fraud_detector_test.rb
  - notifies teacher when access is blocked
- test\services\roster_csv_importer_test.rb
  - imports roster and enrolls students
- test\services\term_report_builder_test.rb
  - counts missing records as absences and flags alerts

## Other
- test\application_system_test_case.rb
- test\test_helper.rb

## テスト未実装のファイル
- test\application_system_test_case.rb
- test\models\attendance_record_test.rb
- test\models\enrollment_test.rb
- test\models\school_class_test.rb
- test\models\user_test.rb
- test\test_helper.rb

