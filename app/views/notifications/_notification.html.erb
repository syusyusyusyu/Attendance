<div id="<%= dom_id(notification) %>" class="card p-4 <%= notification.read_at ? "opacity-70" : "" %>">
  <div class="flex items-start justify-between gap-4">
    <div class="min-w-0">
      <div class="flex items-center gap-2">
        <span class="text-sm font-medium text-gray-900 truncate"><%= notification.title %></span>
        <% if notification.read_at.nil? %>
          <span class="text-xs text-white bg-red-500 rounded-full px-2 py-0.5">NEW</span>
        <% end %>
      </div>
      <% if notification.body.present? %>
        <p class="text-sm text-gray-600 mt-2 break-words"><%= notification.body %></p>
      <% end %>
      <div class="mt-3 flex flex-wrap items-center gap-3">
        <% if notification.action_path.present? %>
          <%= link_to "詳細を見る", notification.action_path, class: "text-sm text-google-green hover:underline" %>
        <% end %>
        <% if notification.read_at.nil? %>
          <%= link_to "既読にする",
            notification_mark_read_path(notification),
            data: { turbo_method: :patch },
            class: "text-sm text-gray-500 hover:text-gray-700 hover:underline" %>
        <% end %>
      </div>
    </div>
    <div class="text-xs text-gray-500 whitespace-normal shrink-0">
      <%= notification.created_at.strftime("%Y-%m-%d %H:%M") %>
    </div>
  </div>
</div>

