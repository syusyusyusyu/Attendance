<%# AdminKit風通知カード: CSS変数、統一スタイル %>
<div id="<%= dom_id(notification) %>" class="card p-4 <%= notification.read_at ? "opacity-70" : "" %>">
  <div class="flex items-start justify-between gap-4">
    <div class="shrink-0 mt-0.5">
      <% case notification.kind
         when "info" %>
        <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color: var(--color-info);">
          <circle cx="12" cy="12" r="10" stroke-linecap="round" stroke-linejoin="round"/>
          <line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/>
        </svg>
      <% when "warning" %>
        <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color: var(--color-warning);">
          <path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z" stroke-linecap="round" stroke-linejoin="round"/>
          <line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/>
        </svg>
      <% when "success" %>
        <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color: var(--color-success);">
          <path d="M22 11.08V12a10 10 0 11-5.93-9.14" stroke-linecap="round" stroke-linejoin="round"/>
          <polyline points="22 4 12 14.01 9 11.01" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      <% end %>
    </div>
    <div class="min-w-0 flex-1">
      <div class="flex items-center gap-2">
        <span class="text-sm font-medium truncate"><%= notification.title %></span>
        <% if notification.read_at.nil? %>
          <span class="badge badge-error">NEW</span>
        <% end %>
      </div>
      <% if notification.body.present? %>
        <p class="text-sm mt-2 break-words text-body-secondary"><%= notification.body %></p>
      <% end %>
      <div class="mt-3 flex flex-wrap items-center gap-3">
        <% if notification.action_path.present? %>
          <%= link_to "詳細を見る", notification.action_path, class: "text-sm hover:underline", style: "color: var(--color-primary);" %>
        <% end %>
        <% if notification.read_at.nil? %>
          <%= link_to "既読にする",
            notification_mark_read_path(notification),
            data: { turbo_method: :patch },
            class: "text-sm hover:underline",
            style: "color: var(--color-text-muted);" %>
        <% end %>
      </div>
    </div>
    <div class="text-xs whitespace-normal shrink-0 text-body-muted">
      <%= notification.created_at.strftime("%Y-%m-%d %H:%M") %>
    </div>
  </div>
</div>
