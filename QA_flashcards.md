# 一問一答（展示用フラッシュカード集）

以下は展示会で想定される質問に対する短答形式の一問一答（フラッシュカード）です。即答用メモとして利用してください。

1. Q: このアプリの目的は？
   A: 授業の出席管理を簡単にすること。QRで出席打刻、履歴参照、管理機能を提供。

2. Q: 主要なバックエンドは何？
   A: Ruby on Rails。

3. Q: フロントは何を使っている？
   A: Tailwind CSS と Importmap（JSはImportmap/ESBuild混在の可能性あり）。

4. Q: 認証方式は？
   A: セッションベース（`SessionsController`）。必要なら Devise へ移行可。

5. Q: 出席打刻の流れは？
   A: トークン生成→QR表示→別端末でスキャン→サーバでトークン検証→記録保存。

6. Q: QRトークンの有効期限は？
   A: 実装によるが短時間（例: 5分）を推奨。

7. Q: データベースは何を使う？
   A: 開発はSQLite、運用はPostgresを推奨。

8. Q: 出席データのプライバシー対策は？
   A: 最小限の個人情報保存、アクセス制御、ログ管理、必要なら暗号化。

9. Q: QR偽造対策は？
   A: トークン短寿命、HMAC署名、打刻時の追加検証を推奨。

10. Q: オフラインで利用できる？
    A: PWAで一部対応可能。ただし最終集計は同期が必要。

11. Q: どのファイルに主要ロジックがある？
    A: `app/models`, `app/controllers`, `app/services` を確認。

12. Q: `AttendanceRecord` に入る主なカラムは？
    A: `user_id`, `school_class_id`, `recorded_at`, `method`(QR等) など。

13. Q: テストは何を使ってる？
    A: Rails の Minitest（`test/`）。システムテストは Capybara を推奨。

14. Q: 本番デプロイの注意点は？
    A: 環境変数管理、DB接続、アセットプリコンパイル、ログ監視を必須に。

15. Q: アセットが反映されない場合は？
    A: `bin/rails assets:precompile` とブラウザキャッシュのクリア。

16. Q: PWA を有効にするには？
    A: マニフェストとService Worker、`apple-touch-icon` を設定し、HTTPSで配信。

17. Q: サードパーティログインは可能？
    A: OAuth（学内システムのSAML/SSO）を実装すれば可能。

18. Q: 大量の同時アクセスへの対策は？
    A: キャッシュ、Redis、ジョブキュー、DBインデックス、スケールアウト。

19. Q: ジョブキューは何を使う？
    A: ActiveJobの選択肢で Sidekiq (Redis) を推奨。

20. Q: ログの監視は？
    A: Sentry 等のエラートラッキングと集中ログ管理（Papertrail等）。

21. Q: CSV一括登録は？
    A: `db/seeds.rb` か独自タスクでCSVパース→ `Enrollment` 作成。

22. Q: ユーザロールの管理は？
    A: `role` カラムで区別、PunditやCanCanCanで権限管理。

23. Q: 監査ログは残せる？
    A: はい。変更履歴や打刻のメタ情報を別テーブルへ保存。

24. Q: APIを公開できますか？
    A: RESTful API を追加して外部連携可能。

25. Q: DBスキーマ変更の手順は？
    A: Rails マイグレーションを作成し `rails db:migrate` を実行。

26. Q: マイグレーションのロールバックは？
    A: `rails db:rollback`（ステップ指定可）。本番は慎重に。

27. Q: スキーマの同期確認は？
    A: `rails db:migrate:status` で確認。

28. Q: セッション固定攻撃対策は？
    A: セッションID再生成、HTTPS、secure cookieを使用。

29. Q: CSRF 対策は？
    A: Rails の `csrf_meta_tags` とトークン検証を使用。

30. Q: CSP を設定する理由は？
    A: XSS等の注入攻撃の軽減と外部リソースの制御。

31. Q: QR 読取精度が低い場合の対処は？
    A: コントラスト向上、サイズ調整、カメラのフォーカス案内。

32. Q: 画像やQRの配信負荷対策は？
    A: CDN を使い、キャッシュ効かせる。

33. Q: パスワードを平文で保存してますか？
    A: いいえ。ハッシュ化（bcrypt等）で保存する必要あり。

34. Q: バックアップの推奨頻度は？
    A: 重要度に依存するが日次バックアップを推奨。

35. Q: 開発環境の初期セットアップは？
    A: `bundle install` → `bin/rails db:setup` → `bin/rails server`。

36. Q: 環境変数の管理方法は？
    A: `.env`（開発）やシークレットマネージャ（本番）で管理。

37. Q: 学内認証と連携したい場合は？
    A: SSO（SAML/OAuth）を実装してプロバイダと連携。

38. Q: 外部API連携の注意点は？
    A: レート制限、認証、リトライ、タイムアウト設定。

39. Q: SQLインジェクション対策は？
    A: プレースホルダ／ActiveRecordを使い手動クエリを避ける。

40. Q: レスポンスの遅延が発生したら？
    A: プロファイリング（NewRelic等）、クエリ最適化、キャッシュ導入。

41. Q: indexを張るべきカラムは？
    A: 検索やJOINで頻繁に使う `user_id`, `class_id`, `created_at` など。

42. Q: N+1問題をどう検出する？
    A: ログのSQL確認、bullet gem で検出可能。

43. Q: Rails の eager_load と preload の違いは？
    A: eager_load は JOIN、preload は別クエリでロードする点が異なる。

44. Q: CSRFトークンが原因でフォームが送信できない時は？
    A: `csrf_meta_tags` が正しく配置されているか確認。

45. Q: deployment のゼロダウンタイム手法は？
    A: ローリングデプロイやBlue-Greenデプロイを利用。

46. Q: Ruby のバージョン管理は？
    A: rbenv や rvm、ASDF を使用。

47. Q: Ruby の Gem 管理は？
    A: `Gemfile` と Bundler で管理。

48. Q: アクセス制御のテストは？
    A: 権限ごとに統合テストを用意し、期待通りのレスポンスか確認。

49. Q: DB マイグレーションで注意することは？
    A: ダウンタイムを意識した非ブロッキングな変更を優先。

50. Q: シードデータの扱いは？
    A: 開発用のダミーデータに限定し、本番では別手順でインポート。

51. Q: 大量データのインポートでの注意は？
    A: バルクインサート、トランザクション分割、バッチ処理を使う。

52. Q: APIの認証方式でよく使うのは？
    A: トークンベース（Bearer）、OAuth2など。

53. Q: レスポンシブデザインの確認方法は？
    A: ブラウザのデバイスツールで主要画面サイズを検証。

54. Q: スタイル一貫性の担保は？
    A: Tailwind の設計ルールとコンポーネント化を徹底。

55. Q: i18n 対応は？
    A: `config/locales` に翻訳を用意し `I18n` を使用。

56. Q: アクセシビリティで最低限チェックすることは？
    A: キーボード操作、ARIA属性、コントラスト、ラベルの適切さ。

57. Q: 脆弱性診断はどう行う？
    A: 自動ツール（Brakeman等）と手動レビューを組合せる。

58. Q: Brakeman は何のため？
    A: Rails 固有の静的解析でセキュリティ問題を検出するツール。

59. Q: 機密情報を間違えてコミットしたら？
    A: すぐに鍵をローテーションし、履歴から除去する手順を実行。

60. Q: 非同期処理の実装例は？
    A: ActiveJob を使い、重い処理をバックグラウンドへ移す。

61. Q: 画像アップロードはどうしている？
    A: ActiveStorage や外部ストレージ（S3）を使用するのが一般的。

62. Q: ファイルサイズ制限は？
    A: アプリ要件に応じてサーバ側で制限とバリデーションを実装。

63. Q: CSRFトークンがエラーになる原因は？
    A: セッション不整合やトークン未送信、同一サイトでないHTTP問題。

64. Q: テストデータの管理は？
    A: fixtures や FactoryBot を使用し再現性を担保。

65. Q: 開発中に DB をリセットしたい時は？
    A: `rails db:reset`（データ消えるので注意）。

66. Q: Rails のログレベルを変えるには？
    A: `config/environments/*.rb` の `config.log_level` を変更。

67. Q: API レスポンスの形式は？
    A: JSON が標準。必要ならJSON:APIやGraphQLも選択可。

68. Q: GraphQL 利点は？
    A: クライアントが必要なデータだけ取得できる柔軟性。

69. Q: GraphQL の注意点は？
    A: 複雑なクエリでN+1になりやすく、深さ制限やコスト制御が必要。

70. Q: データ消失防止のベストプラクティスは？
    A: バックアップ、マイグレーションの事前検証、トランザクション利用。

71. Q: ローカルで環境差によるバグを防ぐには？
    A: Docker等で一貫した環境を整備する。

72. Q: CI/CD の導入メリットは？
    A: 自動テスト、品質担保、デプロイの自動化で信頼性向上。

73. Q: デプロイ後のロールバック方法は？
    A: デプロイ手法による（Git revert/rollback、Blue-Green等）。

74. Q: アプリの監査証跡はどこに保存？
    A: ログや監査テーブル、外部ログ管理サービスに保存。

75. Q: フロントでのバリデーションとサーバ側の違いは？
    A: フロントはUX向上、サーバは必須のセキュリティチェック。

76. Q: キャッシュ無効化方法は？
    A: アセットにフィンガープリント付与、HTTPヘッダでキャッシュ制御。

77. Q: 学生向けの説明で重視する点は？
    A: 操作の簡単さ、プライバシー配慮、誤操作時のリカバリ。

78. Q: 教員向けの説明で重視する点は？
    A: 正確性、監査性、システム連携の柔軟性。

79. Q: システム拡張の最初のステップは？
    A: 要件定義とデータモデルの確認。

80. Q: 追加で欲しい資料は？
    A: ER図、API仕様、デプロイ手順、ユーザマニュアルなど。
