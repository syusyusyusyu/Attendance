# 一問一答（展示用フラッシュカード集）

展示会で想定される質問に対する短答形式の一問一答です。即答用メモとして利用してください。

1. Q: このアプリの目的は？
   A: 授業の出席管理を簡単にすること。QRで入室/退室を記録し、履歴と申請を管理します。

2. Q: 主要なバックエンドは何？
   A: Ruby on Rails。

3. Q: フロントは何を使っている？
   A: Tailwind CSS と Hotwire（Importmap）。

4. Q: 認証方式は？
   A: セッションベース（`SessionsController`）。

5. Q: 出席打刻の流れは？
   A: QR生成→学生がスキャン→トークン検証→出席記録保存→ログ記録。

6. Q: 退室はどう記録する？
   A: 同じ授業のQRを2回目に読み取ると退室(チェックアウト)になります。

7. Q: 早退判定は？
   A: 最低出席率に基づき滞在時間が不足すると早退になります。

8. Q: QRトークンの有効期限は？
   A: 5分（短時間）。

9. Q: QRコードは自動更新される？
   A: 60秒間隔で自動更新されます。

10. Q: データベースは何を使う？
    A: 開発はPostgres推奨、本番もPostgres。

11. Q: `AttendanceRecord` に入る主なカラムは？
    A: `user_id`, `school_class_id`, `date`, `status`, `checked_in_at`, `checked_out_at`, `duration_minutes` など。

12. Q: 出席申請はできる？
    A: 学生が欠席/遅刻/公欠を申請し、教員が承認/却下できます。

13. Q: 出席確定/自動欠席は？
    A: 授業回の確定で未登録は欠席。定期実行は `bin/rails attendance:finalize`。

14. Q: テストは何を使ってる？
    A: Rails の Minitest（`test/`）。

15. Q: 本番デプロイの注意点は？
    A: 環境変数、DB接続、アセットプリコンパイル、ログ監視。

16. Q: アセットが反映されない場合は？
    A: `bin/rails assets:precompile` とブラウザキャッシュのクリア。

17. Q: PWA を有効にするには？
    A: マニフェストとService Worker、`apple-touch-icon` を設定しHTTPSで配信。

18. Q: サードパーティログインは可能？
    A: OAuth/SSOを実装すれば可能。

19. Q: 大量の同時アクセスへの対策は？
    A: キャッシュ、ジョブキュー、DBインデックス、スケールアウト。

20. Q: 監査ログは残せる？
    A: はい。QRスキャンログと出席変更ログに保存します。

21. Q: APIを公開できますか？
    A: REST API を追加して外部連携可能です。

22. Q: DBスキーマ変更の手順は？
    A: Rails マイグレーションを作成し `rails db:migrate` を実行。

23. Q: CSRF 対策は？
    A: Rails の `csrf_meta_tags` とトークン検証。

24. Q: カメラQRスキャン対応ブラウザは？
    A: Chromium系(Chrome/Edge/Brave/Opera/Samsung Internet)推奨。iOS Safari 16+ はjsQRフォールバックで利用可。

25. Q: QR偽造対策は？
    A: トークン短寿命と署名検証で無効化。

26. Q: CSVは期間指定できる？
    A: `start_date`/`end_date` で期間出力できます。

27. Q: CSVに追加された項目は？
    A: 授業回ID、入室時刻、退室時刻、滞在分、申請状況/種別/理由、QRセッションID、IP、UserAgent、備考。

28. Q: CSVインポートの必須列は？
    A: `日付/学生ID/出席状況` が必須で、出席状況は `出席/遅刻/欠席/公欠/早退`。

29. Q: 遅刻判定や締切はどうなっている？
    A: 大阪情報コンピュータ専門学校の基準に固定。出席QRのスキャンは出席、授業開始20分以降は欠席。

30. Q: 出席レポートは見られる？
    A: `/reports` で期間指定の集計を確認できます。

31. Q: 通知はどこで見る？
    A: `/notifications` で確認できます。

32. Q: QRスキャンのセキュリティは？
    A: 分間スキャン上限、許可IP/端末キーワードの制限を設定できます。

33. Q: QRスキャン結果はリアルタイム反映される？
    A: はい。出席管理画面に即時反映されます。

34. Q: 休講や補講は設定できる？
    A: クラス詳細の「特別日程」で日付単位に設定できます。

35. Q: 出席修正の理由は残る？
    A: 修正理由が必須で、出席変更ログに記録されます。

36. Q: 出席率の警告基準は？
    A: ポリシーで警告欠席回数・警告出席率を設定できます。

37. Q: 期末レポートは出力できる？
    A: `/reports` からPDF/CSVを出力できます。

38. Q: 不正検知アラートはある？
    A: 失敗多発/同一IP集中/IP・端末制限/QR共有で通知されます。

39. Q: 出席確定の解除は誰ができる？
    A: 管理者のみ実行できます。

40. Q: 利用できる役割は？
    A: 学生・教員・管理者です。

41. Q: 管理者と教員の違いは？
    A: 管理者は確定解除や強制修正などの全権限を持ちます。

42. Q: 教員が使う主要画面は？
    A: ダッシュボード、クラス管理、出席確認、QR発行、レポートです。

43. Q: 学生が使う主要画面は？
    A: QRスキャン、出席履歴、出席申請、通知です。

44. Q: クラスは誰が作成できる？
    A: 教員または管理者です。

45. Q: 授業時間はどう決まる？
    A: 時限選択で固定の時間帯が自動設定されます。

46. Q: 教室の候補は？
    A: 2C、3A-3C、4A-4D、5A-5D、6A-6D、7A-7D、8A-8D、9D-1/9D-2です。

47. Q: 学期の候補は？
    A: 前期と後期のみです。

48. Q: 授業回はどう作成される？
    A: 画面表示時に `ClassSessionResolver` が日付単位で自動生成します。

49. Q: 補講や休講はどこで設定する？
    A: クラス詳細の特別日程で日付単位に設定します。

50. Q: 授業回の確定状態はどこで分かる？
    A: バッジ表示と `locked_at` の有無で判定できます。

51. Q: 出席QRは誰が発行できる？
    A: 教員または管理者です。

52. Q: 出席QRのスキャン結果は？
    A: 出席扱いとして記録されます。

53. Q: 遅刻はどう付与される？
    A: 教員修正、申請承認、CSV反映で付与されます。

54. Q: QRスキャンの20分締切は何を基準にする？
    A: QR発行時刻を基準に出席登録の締切を判定します。

55. Q: 出席QRの有効期限は？
    A: 5分です。

56. Q: QRが再発行される理由は？
    A: 使い回し防止のため旧セッションを失効します。

57. Q: QRトークンの署名鍵は？
    A: `QR_TOKEN_SECRET`（未設定時は `secret_key_base`）。

58. Q: QRセッションの主な保存項目は？
    A: `attendance_date`、`issued_at`、`expires_at`、`teacher_id` です。

59. Q: QRスキャンログに保存される情報は？
    A: 結果、IP、UserAgent、時刻、出席判定などです。

60. Q: QR不正検知は何を見る？
    A: 失敗多発、同一トークン共有、同一IP集中などです。

61. Q: QRスキャンの連続制限は？
    A: 分間上限をポリシーで設定できます。

62. Q: IP/端末制限は何で設定する？
    A: 許可IPレンジと端末キーワードです。

63. Q: 出席記録のユニーク条件は？
    A: 学生×クラス×日付で1件です。

64. Q: 退室はどう記録する？
    A: 同じQRを再スキャンすると退室(チェックアウト)になります。

65. Q: 早退判定の基準は？
    A: 滞在分が最低出席率を下回る場合です。

66. Q: 最低出席率はどこで変更する？
    A: 出席ポリシーで設定します。

67. Q: 出席修正の理由は必須？
    A: はい、必須です。

68. Q: 出席変更ログはどこで確認する？
    A: `/attendance-logs` です。

69. Q: QRスキャンログはどこで確認する？
    A: `/scan-logs` です。

70. Q: 出席申請の種類は？
    A: 欠席・遅刻・公欠です。

71. Q: 申請はいつ出席に反映される？
    A: 教員が承認した時点で反映されます。

72. Q: 申請の一括処理はできる？
    A: 教員/管理者が一括承認・却下できます。

73. Q: 通知は誰に届く？
    A: 学生と教員の両方に届きます。

74. Q: 通知の種類は？
    A: info と warning です。

75. Q: CSV出力の文字コードは？
    A: UTF-8 BOM付きです。

76. Q: CSVに含まれる追加項目は？
    A: 入退室時刻、滞在分、申請情報、QRセッションID、IP/UAなどです。

77. Q: CSVインポートの用途は？
    A: まとめて出席修正・追加するためです。

78. Q: レポートの出力形式は？
    A: 画面表示に加えCSV/PDFを出力できます。

79. Q: PDFレポートに含まれる内容は？
    A: 集計グラフと学生別の一覧です。

80. Q: レポートの集計期間は？
    A: `start_date` 〜 `end_date` です。

81. Q: 日次・週次の出席率は見られる？
    A: `/reports` で推移が確認できます。

82. Q: 要注意者の判定条件は？
    A: 欠席合計や出席率が閾値を下回る場合です。

83. Q: 監査ログの目的は？
    A: 修正履歴の追跡と説明責任の確保です。

84. Q: ログイン後の導線は？
    A: ロール別ダッシュボードから主要機能へ移動します。

85. Q: モバイル対応は？
    A: レスポンシブで画面幅に収まる設計です。

86. Q: 横スクロールはどう防いでいる？
    A: 画面全体の `overflow-x` を抑制し、テーブルは折り返します。

87. Q: セキュリティ対策は？
    A: CSRF、署名トークン、IP/UA制限、レート制限です。

88. Q: パフォーマンス対策は？
    A: インデックス、キャッシュ、集計分離などです。

89. Q: リアルタイム反映はある？
    A: QRスキャン時にTurbo Streamsで反映されます。

90. Q: QR生成ライブラリは？
    A: `RQRCode` です。

91. Q: PDF生成ライブラリは？
    A: `prawn` です。

92. Q: QRが読めない時は？
    A: 手入力フォームでトークンを送信します。

93. Q: カメラ権限がない場合は？
    A: 手入力に切り替えます。

94. Q: 休講の日の出席はどうなる？
    A: スキャン不可で休講表示になります。

95. Q: 出席確定のタイミングは？
    A: 締切後に確定ボタンまたは定期実行で確定します。

96. Q: 出席確定の解除は？
    A: 管理者のみ実行できます。

97. Q: Renderのビルドで重要なコマンドは？
    A: `bin/render-build.sh` です。

98. Q: デモデータはどこから作る？
    A: `db/seeds.rb` を実行します。

99. Q: テストの入口は？
    A: `bin/rails test` です。

100. Q: 今後の拡張候補は？
    A: SSO/API連携・公認端末などが将来候補です。
